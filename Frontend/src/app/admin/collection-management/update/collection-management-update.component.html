<div class="page-wrapper" style="min-height: 922px;">
  <div class="content">
    <div class="page-header">
      <div class="page-title">
        <h4>Thông tin nhóm sản phẩm</h4>
        <h6>CHỈNH SỬA THÔNG TIN NHÓM SẢN PHẨM</h6>
      </div>
    </div>

    <div class="page-body">
      <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
        <app-alert-error></app-alert-error>
        <div class="card">
          <div class="card-body">
            <div class="ui-information-head">
              <span class="ui-information-title font-weight-bold text-primary">Thông tin chung</span>
            </div>
            <hr>
            <div class="ui-information-body">
              <div class="row">
                <div class="col-lg-6 col-sm-6 col-12">
                  <div class="form-group">
                    <label>Tên nhóm sản phẩm</label>
                    <input type="text" formControlName="name" name="name" placeholder="Ví dụ: Nhóm Apple" required>

                    <div *ngIf="editForm.get('name')!.invalid && (editForm.get('name')!.dirty || editForm.get('categoryName')!.touched)">
                      <small
                        class="form-text text-danger"
                        *ngIf="editForm.get('name')?.errors?.['maxlength']"
                      >
                        This field cannot be longer than 50 characters.
                      </small>
                    </div>

                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="form-group">
                    <label>Mô tả</label>
                    <textarea class="form-control" name="description" formControlName="description"></textarea>

                    <div *ngIf="editForm.get('description')!.invalid && (editForm.get('description')!.dirty || editForm.get('description')!.touched)">
                      <small class="form-text text-danger" *ngIf="editForm.get('description')?.errors?.['required']">
                        This field is required.
                      </small>

                      <small
                        class="form-text text-danger"
                        *ngIf="editForm.get('description')?.errors?.['maxlength']"
                      >
                        This field cannot be longer than 100 characters.
                      </small>

                      <small
                        class="form-text text-danger"
                        *ngIf="editForm.get('description')?.errors?.['minlength']"
                      >
                        This field is required to be at least 5 characters.
                      </small>

                      <small
                        class="form-text text-danger"
                        *ngIf="editForm.get('description')?.errors?.['description']"
                      >
                        Your description is invalid.
                      </small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div class="ui-information-head">
              <span class="ui-information-title font-weight-bold text-primary">Sản phẩm</span>
              <div class="row">
                <div class="col-sm-6 col-12 pt-4">
                  <div class="input-group omni-product-search">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <svg class="svg-next-icon svg-next-icon-size-18" width="18" height="18">
                          <svg viewBox="0 0 12 12">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.92082 7.44942C7.95668 7.484 8.00454 7.50332 8.05435 7.50332H8.23644C8.40734 7.50332 8.57122 7.57129 8.69194 7.69226L11.3339 10.3395C11.608 10.6141 11.6078 11.0589 11.3334 11.3333C11.059 11.6077 10.6142 11.6079 10.3395 11.3338L7.69232 8.69188C7.57135 8.57116 7.50338 8.40728 7.50338 8.23638V8.05429C7.50338 8.00448 7.48406 7.95661 7.44948 7.92076C7.3787 7.84736 7.26321 7.84232 7.18318 7.90552C6.44385 8.48941 5.51187 8.83665 4.50338 8.83665C2.11004 8.83665 0.170044 6.89665 0.170044 4.50332C0.170044 2.10998 2.11004 0.169983 4.50338 0.169983C6.89671 0.169983 8.83671 2.10998 8.83671 4.50332C8.83671 5.51181 8.48947 6.44378 7.90558 7.18312C7.84238 7.26315 7.84742 7.37864 7.92082 7.44942ZM1.50338 4.50332C1.50338 6.16332 2.84338 7.50332 4.50338 7.50332C6.16338 7.50332 7.50338 6.16332 7.50338 4.50332C7.50338 2.84332 6.16338 1.50332 4.50338 1.50332C2.84338 1.50332 1.50338 2.84332 1.50338 4.50332Z"></path>
                          </svg>
                        </svg>
                      </span>
                    </div>
                    <input placeholder="Tìm kiếm sản phẩm" class="form-control" type="text" value="">
                    <div class="input-group-append">
                      <button type="button" class="btn-btn-default" (click)="searchProduct()">
                        Tìm kiếm
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="ui-information-body collection-product-list--body min-height-100px">
              <div class="form-group" *ngIf="!products">
                <div class="d-flex align-items-center justify-content-center flex-column">
                  <svg class="svg-next-icon mb-3 color-heather svg-next-icon-size-100" width="100" height="100">
                    <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 208 230">
                      <defs>
                        <linearGradient id="linear-gradient" x1="133.69" y1="120.61" x2="73.06" y2="91.22" gradientTransform="matrix(1, 0, 0, -1, 0, 231.28)" gradientUnits="userSpaceOnUse">
                          <stop offset="0" stop-color="#95abc2"></stop>
                          <stop offset="1" stop-color="#fff"></stop>
                        </linearGradient>
                        <mask id="mask" x="134.5" y="14.55" width="17.97" height="17.21" maskUnits="userSpaceOnUse">
                          <g id="mask0">
                            <path d="M137,24a8.1,8.1,0,0,1,8.1-8.1h6.3v6.3a8.1,8.1,0,0,1-8.1,8.1H137Z" fill="#fff"></path>
                          </g>
                        </mask>
                      </defs>
                      <title>Artwork</title>
                      <path d="M94.2,85.7l85.9,23.6v82.6l-85.9-37Z" fill="#8e99a3"></path>
                      <path d="M94.3,85.7,24.1,105.3v86.8l70.1-37.6Z" fill="#a0aab5"></path>
                      <path d="M139.4,185.9c-19.4-5.7-53.4-5.2-66.2-38.3-11.7-30.4,31.5-59.6,43.6-46.8,8.6,9.1-2.4,22.2-17.7,20.7C82,119.8,71.9,104.5,75.3,88c6.7-32.7,58.3-54.4,60.5-55.9" fill="none" stroke-width="3" stroke-dasharray="6 7" stroke="url(#linear-gradient)"></path>
                      <path d="M141,21.5s-.5-12.3-3.7-15.6a8.4,8.4,0,0,0-11.8,11.8C128.7,21,141,21.5,141,21.5Z" fill="#ced8e5" opacity="0.4"></path>
                      <path d="M146.7,26.4s.5,12.3,3.7,15.6a8.4,8.4,0,0,0,11.8-11.8C159.1,26.9,146.7,26.4,146.7,26.4Z" fill="#ced8e5" opacity="0.4"></path>
                      <path d="M137,24a8.1,8.1,0,0,1,8.1-8.1h6.3v6.3a8.1,8.1,0,0,1-8.1,8.1H137Z" fill="#a8b7c5"></path>
                      <g mask="url(#mask)">
                        <rect x="140.1" y="16.7" width="2.3" height="16.69" transform="translate(23.6 107.2) rotate(-45)" fill="#dde5f2"></rect>
                        <path d="M139.1,16.2l1.6-1.6,11.8,11.8L150.9,28Z" fill="#dde5f2"></path>
                      </g>
                      <path d="M159.2,12.3l5.5-1.3" fill="none" stroke="#8696c5" stroke-width="0.9"></path>
                      <path d="M156.9,10.1l2.1-5.5" fill="none" stroke="#8696c5" stroke-width="0.9"></path>
                      <path d="M153.7,20.5a6.1,6.1,0,1,0-6.1-6.1A6.1,6.1,0,0,0,153.7,20.5Z" fill="#8b9aa8"></path>
                      <path d="M24.1,105.5,110,132.8V229L24.1,192Z" fill="#dae2ec"></path>
                      <path d="M180.5,109.2l-71.7,23.6V229l71.7-37Z" fill="#c5d0d9"></path>
                      <path d="M180.3,109.1,208,146.2l-73.6,29L109,132.6Z" fill="#dae2ec"></path>
                      <path d="M24,105.3,0,142.8l84.6,32.4,24.7-42.7Z" fill="#c5d0d9"></path>
                    </svg>
                  </svg>
                  <div class="text-center text-secondary">Không có sản phẩm nào trong nhóm sản phẩm này</div>
                </div>
              </div>

              <div class="form-group">
                <ul class="list-group">

                  <li class="list-group-item" *ngFor="let product of products">
                    <div class="row">
                      <div class="col-1 flexbox-auto-50">
                          <div class="col-image">
                              <div class="table-cell--image">
                                  <img class="box-image" [src]="'http://localhost:8096/api/v1.0/' + product.idProduct + '/product-image'">
                              </div>
                          </div>
                      </div>
                      <div class="col-10 flexbox-content table-break-word">
                          <!-- <a target="_blank" (click)="handleNavigation()">{{ product.productName }}</a> -->
                          <a [routerLink]="['/admin/products', product.idProduct]">{{ product.productName }}</a>
                      </div>
                      <div class="col-1 flexbox-auto-50 text-right">
                          <div class="text-center p-r10 display--inline-box">
                              <div class="">
                                  <button class="btn btn-link no-padding link-no-pding">
                                      <svg class="svg-next-icon svg-next-icon-size-16" width="16" height="16">
                                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                                              <path d="M18.263 16l10.07-10.07c.625-.625.625-1.636 0-2.26s-1.638-.627-2.263 0L16 13.737 5.933 3.667c-.626-.624-1.637-.624-2.262 0s-.624 1.64 0 2.264L13.74 16 3.67 26.07c-.626.625-.626 1.636 0 2.26.312.313.722.47 1.13.47s.82-.157 1.132-.47l10.07-10.068 10.068 10.07c.312.31.722.468 1.13.468s.82-.157 1.132-.47c.626-.625.626-1.636 0-2.26L18.262 16z"></path>
                                          </svg>
                                      </svg>
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
                  </li>

                </ul>
                <div class="text-right">
                  <div class="inline mr-10">
                    <strong>Tổng sản phẩm: {{ products?.length }}</strong>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-11">
            <button
               [disabled]="editForm.invalid || isSaving"
              class="btn btn-submit me-2">Cập nhật</button>
          </div>

          <div class="col-lg-1">
            <a
              class="btn btn-danger me-2"
              (click)="deleteCollection()"
            >
              Xóa
            </a>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>

